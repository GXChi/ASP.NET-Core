/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/layui@2.6.5/src/modules/dropdown.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/**
 
 @Name：dropdown 下拉菜单组件
 @License：MIT

 */
layui.define(["jquery","laytpl","lay"],(function(e){"use strict";var i=layui.$,n=layui.laytpl,t=layui.hint(),a=layui.device().mobile?"click":"mousedown",l="dropdown",o="layui_dropdown_index",r={config:{},index:layui.dropdown?layui.dropdown.index+1e4:0,set:function(e){var n=this;return n.config=i.extend({},n.config,e),n},on:function(e,i){return layui.onevent.call(this,l,e,i)}},u=function(){var e=this,i=e.config,n=i.id;return u.that[n]=e,{config:i,reload:function(i){e.reload.call(e,i)}}},d="layui-menu-item-up",s="layui-menu-item-down",m="layui-menu-body-title",c="layui-menu-item-group",p="layui-menu-item-parent",y="layui-menu-item-checked",f="layui-menu-item-checked2",v="layui-menu-body-panel",g="layui-menu-body-panel-left",h="."+c+">."+m,w=function(e){var n=this;n.index=++r.index,n.config=i.extend({},n.config,r.config,e),n.init()};w.prototype.config={trigger:"click",content:"",className:"",style:"",show:!1,isAllowSpread:!0,isSpreadItem:!0,data:[],delay:300},w.prototype.reload=function(e){var n=this;n.config=i.extend({},n.config,e),n.init(!0)},w.prototype.init=function(e){var n=this,t=n.config,a=t.elem=i(t.elem);if(a.length>1)return layui.each(a,(function(){r.render(i.extend({},t,{elem:this}))})),n;if(!e&&a[0]&&a.data(o)){var l=u.getThis(a.data(o));if(!l)return;return l.reload(t)}t.id="id"in t?t.id:n.index,t.show&&n.render(e),n.events()},w.prototype.render=function(e){var t,l=this,d=l.config,s=i("body"),c=function(e,t){return layui.each(t,(function(t,a){var l=a.child&&a.child.length>0,o="isSpreadItem"in a?a.isSpreadItem:d.isSpreadItem,r=a.templet?n(a.templet).render(a):d.templet?n(d.templet).render(a):a.title,u=(l&&(a.type=a.type||"parent"),a.type?{group:"group",parent:"parent","-":"-"}[a.type]||"parent":"");if("-"===u||a.title||a.id||l){var s,y,f=i(["<li"+(y={group:"layui-menu-item-group"+(d.isAllowSpread?o?" layui-menu-item-down":" layui-menu-item-up":""),parent:p,"-":"layui-menu-item-divider"},(l||u?' class="'+y[u]+'"':"")+">"),(s="href"in a?'<a href="'+a.href+'" target="'+(a.target||"_self")+'">'+r+"</a>":r,l?'<div class="'+m+'">'+s+("parent"===u?'<i class="layui-icon layui-icon-right"></i>':"group"===u&&d.isAllowSpread?'<i class="layui-icon layui-icon-'+(o?"up":"down")+'"></i>':"")+"</div>":'<div class="'+m+'">'+s+"</div>"),"</li>"].join(""));if(f.data("item",a),l){var v=i('<div class="layui-panel layui-menu-body-panel"></div>'),g=i("<ul></ul>");"parent"===u?(v.append(c(g,a.child)),f.append(v)):f.append(c(g,a.child))}e.append(f)}})),e},y=['<div class="layui-dropdown layui-border-box layui-panel layui-anim layui-anim-downbit">',"</div>"].join("");(("contextmenu"===d.trigger||lay.isTopElem(d.elem[0]))&&(e=!0),e||!d.elem.data(o+"_opened"))&&(l.elemView=i(y),l.elemView.append(d.content||(t=i('<ul class="layui-menu layui-dropdown-menu"></ul>'),d.data.length>0?c(t,d.data):t.html('<li class="layui-menu-item-none">no menu</li>'),t)),d.className&&l.elemView.addClass(d.className),d.style&&l.elemView.attr("style",d.style),r.thisId=d.id,l.remove(),s.append(l.elemView),d.elem.data(o+"_opened",!0),l.position(),u.prevElem=l.elemView,u.prevElem.data("prevElem",d.elem),l.elemView.find(".layui-menu").on(a,(function(e){lay.stope(e)})),l.elemView.find(".layui-menu li").on("click",(function(e){var n=i(this),t=n.data("item")||{};t.child&&t.child.length>0||"-"===t.type||(l.remove(),"function"==typeof d.click&&d.click(t,n))})),l.elemView.find(h).on("click",(function(e){var n=i(this).parent();"group"===(n.data("item")||{}).type&&d.isAllowSpread&&u.spread(n)})),"mouseenter"===d.trigger&&l.elemView.on("mouseenter",(function(){clearTimeout(u.timer)})).on("mouseleave",(function(){l.delayRemove()})))},w.prototype.position=function(e){var i=this,n=i.config;lay.position(n.elem[0],i.elemView[0],{position:n.position,e:i.e,clickType:"contextmenu"===n.trigger?"right":null})},w.prototype.remove=function(){this.config;var e=u.prevElem;e&&(e.data("prevElem")&&e.data("prevElem").data(o+"_opened",!1),e.remove())},w.prototype.delayRemove=function(){var e=this,i=e.config;clearTimeout(u.timer),u.timer=setTimeout((function(){e.remove()}),i.delay)},w.prototype.events=function(){var e=this,i=e.config;"hover"===i.trigger&&(i.trigger="mouseenter"),e.prevElem&&e.prevElem.off(i.trigger,e.prevElemCallback),e.prevElem=i.elem,e.prevElemCallback=function(n){clearTimeout(u.timer),e.e=n,e.render(),n.preventDefault(),"function"==typeof i.ready&&i.ready(e.elemView,i.elem,e.e.target)},i.elem.on(i.trigger,e.prevElemCallback),"mouseenter"===i.trigger&&i.elem.on("mouseleave",(function(){e.delayRemove()}))},u.that={},u.getThis=function(e){var i=u.that[e];return i||t.error(e?"dropdown instance with ID '"+e+"' not found":"ID argument required"),i},u.spread=function(e){var i=e.children("."+m).find(".layui-icon");e.hasClass(d)?(e.removeClass(d).addClass(s),i.removeClass("layui-icon-down").addClass("layui-icon-up")):(e.removeClass(s).addClass(d),i.removeClass("layui-icon-up").addClass("layui-icon-down"))},function(){var e=i(window),n=i(document);e.on("resize",(function(){if(r.thisId){var e=u.getThis(r.thisId);if(e){if(!e.elemView[0]||!i(".layui-dropdown")[0])return!1;"contextmenu"===e.config.trigger?e.remove():e.position()}}})),n.on(a,(function(e){if(r.thisId){var i=u.getThis(r.thisId);if(i){var n=i.config;!lay.isTopElem(n.elem[0])&&"contextmenu"!==n.trigger&&(e.target===n.elem[0]||n.elem.find(e.target)[0]||e.target===i.elemView[0]||i.elemView&&i.elemView.find(e.target)[0])||i.remove()}}}));var t=".layui-menu:not(.layui-dropdown-menu) li";n.on("click",t,(function(e){var n=i(this),t=n.parents(".layui-menu").eq(0),a=n.hasClass(c)||n.hasClass(p),o=t.attr("lay-filter")||t.attr("id"),r=lay.options(this);n.hasClass("layui-menu-item-divider")||a||(t.find("."+y).removeClass(y),t.find("."+f).removeClass(f),n.addClass(y),n.parents("."+p).addClass(f),layui.event.call(this,l,"click("+o+")",r))})),n.on("click",t+h,(function(e){var n=i(this).parents("."+c+":eq(0)"),t=lay.options(n[0]);"isAllowSpread"in t&&!t.isAllowSpread||u.spread(n)}));var o=".layui-menu ."+p;n.on("mouseenter",o,(function(n){var t=i(this).find("."+v);if(t[0]){var a=t[0].getBoundingClientRect();a.right>e.width()&&(t.addClass(g),(a=t[0].getBoundingClientRect()).left<0&&t.removeClass(g)),a.bottom>e.height()&&t.eq(0).css("margin-top",-(a.bottom-e.height()))}})).on("mouseleave",o,(function(e){var n=i(this).children("."+v);n.removeClass(g),n.css("margin-top",0)}))}(),r.reload=function(e,i){var n=u.getThis(e);return n?(n.reload(i),u.call(n)):this},r.render=function(e){var i=new w(e);return u.call(i)},e(l,r)}));
//# sourceMappingURL=/sm/88215dcad4c5c766b80ce9f0f95f01ad598d76de5a9ab35dcb3dabf3aa960e61.map